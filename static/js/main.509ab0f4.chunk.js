(this.webpackJsonpmusicforum=this.webpackJsonpmusicforum||[]).push([[0],{18:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(11),i=n.n(a),o=(n(18),n(5)),s=n(4),u=n(3),l=n(1);var m=function(e){var t=Object(c.useState)(e.edit?e.edit.value:""),n=Object(u.a)(t,2),r=n[0],a=n[1],i=Object(c.useRef)(null);Object(c.useEffect)((function(){i.current.focus()}));var o=function(e){a(e.target.value)},s=function(t){t.preventDefault(),e.onSubmit({id:Math.floor(1e4*Math.random()),text:r}),a("")};return Object(l.jsx)("form",{onSubmit:s,className:"forum-container",children:e.edit?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{placeholder:"Update your item",value:r,onChange:o,name:"text",ref:i,className:"forum-post edit"}),Object(l.jsx)("button",{onClick:s,className:"forum-btn edit",children:"Update"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"",children:Object(l.jsx)("input",{placeholder:"Make Post",value:r,onChange:o,name:"text",className:"forum-post",ref:i})}),Object(l.jsx)("button",{onClick:s,className:"forum-btn",children:"Make a post.."})]})})},d=n(12),j=n(13),b=function(e){var t=e.handleSubmit,n=e.submitLabel,r=e.hasCancelButton,a=void 0!==r&&r,i=e.handleCancel,o=e.initialText,s=void 0===o?"":o,m=Object(c.useState)(s),d=Object(u.a)(m,2),j=d[0],b=d[1],f=0===j.length;return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(j),b("")},children:[Object(l.jsx)("textarea",{className:"comment-form-textarea",value:j,onChange:function(e){return b(e.target.value)}}),Object(l.jsx)("button",{className:"comment-form-button",disabled:f,children:n}),a&&Object(l.jsx)("button",{type:"button",className:"comment-form-button comment-form-cancel-button",onClick:i,children:"Cancel"})]})},f=function e(t){var n=t.comment,c=t.replies,r=t.setActiveComment,a=t.activeComment,i=t.updateComment,o=t.deleteComment,s=t.addComment,u=t.parentId,m=void 0===u?null:u,d=t.currentUserId,j=a&&a.id===n.id&&"editing"===a.type,f=a&&a.id===n.id&&"replying"===a.type,p=new Date-new Date(n.createdAt)>3e5,O=d===n.userId&&0===c.length&&!p,h=Boolean(d),v=d===n.userId&&!p,x=m||n.id,C=new Date(n.createdAt).toLocaleDateString();return Object(l.jsxs)("div",{className:"comment",children:[Object(l.jsx)("div",{className:"comment-image-container"}),Object(l.jsxs)("div",{className:"comment-right-part",children:[Object(l.jsxs)("div",{className:"comment-content",children:[Object(l.jsx)("div",{className:"comment-author",children:n.username}),Object(l.jsx)("div",{children:C})]}),!j&&Object(l.jsx)("div",{className:"comment-text",children:n.body}),j&&Object(l.jsx)(b,{submitLabel:"Update",hasCancelButton:!0,initialText:n.body,handleSubmit:function(e){return i(e,n.id)},handleCancel:function(){r(null)}}),Object(l.jsxs)("div",{className:"comment-actions",children:[h&&Object(l.jsx)("div",{className:"comment-action",onClick:function(){return r({id:n.id,type:"replying"})},children:"Reply"}),v&&Object(l.jsx)("div",{className:"comment-action",onClick:function(){return r({id:n.id,type:"editing"})},children:"Edit"}),O&&Object(l.jsx)("div",{className:"comment-action",onClick:function(){return o(n.id)},children:"Delete"})]}),f&&Object(l.jsx)(b,{submitLabel:"Reply",handleSubmit:function(e){return s(e,x)}}),c.length>0&&Object(l.jsx)("div",{className:"replies",children:c.map((function(t){return Object(l.jsx)(e,{comment:t,setActiveComment:r,activeComment:a,updateComment:i,deleteComment:o,addComment:s,parentId:n.id,replies:[],currentUserId:d},t.id)}))})]})]},n.id)},p=n(6),O=n.n(p),h=n(8),v=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(O.a.mark((function e(t){var n,c=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,e.abrupt("return",{id:Math.random().toString(36).substr(2,9),body:t,parentId:n,userId:"1",username:"John",createdAt:(new Date).toISOString()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{text:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){e.commentsUrl;var t=e.currentUserId,n=Object(c.useState)([]),r=Object(u.a)(n,2),a=r[0],i=r[1],m=Object(c.useState)(null),d=Object(u.a)(m,2),j=d[0],p=d[1],O=a.filter((function(e){return null===e.parentId})),h=function(e,t){x(e,t).then((function(e){i([e].concat(Object(o.a)(a))),p(null)}))},N=function(e,t){C(e).then((function(){var n=a.map((function(n){return n.id===t?Object(s.a)(Object(s.a)({},n),{},{body:e}):n}));i(n),p(null)}))},y=function(e){window.confirm("Are you sure you want to remove comment?")&&g().then((function(){var t=a.filter((function(t){return t.id!==e}));i(t)}))};return Object(c.useEffect)((function(){v().then((function(e){i(e)}))}),[]),Object(l.jsxs)("div",{className:"comments",children:[Object(l.jsx)("div",{className:"comment-form-title",children:"comment"}),Object(l.jsx)(b,{submitLabel:"Write",handleSubmit:h}),Object(l.jsx)("div",{className:"comments-container",children:O.map((function(e){return Object(l.jsx)(f,{comment:e,replies:(n=e.id,a.filter((function(e){return e.parentId===n})).sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()}))),activeComment:j,setActiveComment:p,addComment:h,deleteComment:y,updateComment:N,currentUserId:t},e.id);var n}))})]})},y=function(e){var t=e.posts,n=e.completePost,r=e.removePost,a=e.updatePost,i=Object(c.useState)({id:null,value:""}),o=Object(u.a)(i,2),s=o[0],m=o[1],b=Object(c.useState)(""),f=Object(u.a)(b,2);f[0],f[1];return s.id?Object(l.jsx)("postForm",{edit:s,onSubmit:function(e){a(s.id,e),m({id:null,value:""})}}):t.map((function(e,t){return Object(l.jsxs)("div",{className:"inline",children:[Object(l.jsxs)("div",{className:e.isComplete?"post-row complete":"post-row",children:[Object(l.jsx)("div",{onClick:function(){return n(e.id)},children:e.text},e.id),Object(l.jsxs)("div",{className:"icons",children:[Object(l.jsx)(d.a,{onClick:function(){return r(e.id)},className:"delete-icon"}),Object(l.jsx)(j.a,{onClick:function(){return m({id:e.id,value:e.text})},className:"edit-icon"})]})]},t),Object(l.jsx)(N,{commentsUrl:"http://localhost:3004/comments",currentUserId:"1"})]})}))};var S=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Music"}),Object(l.jsx)("p",{children:"Kindly use the first input"}),Object(l.jsx)(m,{onSubmit:function(e){var t;if(e.text&&!/^\s*$/.test(e.text)){var c=[e].concat(Object(o.a)(n));r(c),(t=console).log.apply(t,Object(o.a)(n))}},className:"extra"}),Object(l.jsx)(y,{posts:n,completePost:function(e){var t=n.map((function(t){return t.id===e&&(t.isComplete=!t.isComplete),t}));r(t)},removePost:function(e){var t=Object(o.a)(n).filter((function(t){return t.id!==e}));r(t)},updatePost:function(e,t){t.text&&!/^\s*$/.test(t.text)&&r((function(n){return n.map((function(n){return n.id===e?t:n}))}))}})]})};var w=function(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(S,{toDoList:n,handleToggle:function(e){var t=n.map((function(t){return t.id===Number(e)?Object(s.a)(Object(s.a)({},t),{},{complete:!t.complete}):Object(s.a)({},t)}));r(t)},handleFilter:function(){var e=n.filter((function(e){return!e.complete}));r(e)}}),Object(l.jsx)(m,{addTask:function(e){var t=Object(o.a)(n);t=[].concat(Object(o.a)(t),[{id:n.length+1,task:e,complete:!1}]),r(t)}})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root")),k()}},[[21,1,2]]]);
//# sourceMappingURL=main.509ab0f4.chunk.js.map